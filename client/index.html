<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<title>Devbench</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="">
<style>
*{box-sizing:border-box}
html{height:100%; margin:0; padding:0}
body{height:100%; margin:0; padding:0}
#app{display:flex; flex-flow:row; width:100%; height:100%}
#input{flex:auto; height:100%; width:50%; resize: horizontal}
#source_editor{width:100%; height:90%}
#output_frame{flex:auto; height:100%; width:50%; resize: horizontal}
*{font-family:"Andika"}
textarea{font-family:"Cascadia code"; font-size:14px}
#controls{text-align:center}

</style>
<script>
window.onbeforeunload = function()
{
  var req = new XMLHttpRequest();
  req.open("POST", "/shutdown");
  req.setRequestHeader("Content-Type", "application/json");
  req.send(JSON.stringify({}));
}
</script>
<body>
<div id="app">
<form action="/formaction" target="output" id="input" method="post" enctype="multipart/form-data">
<textarea id="source_editor" name="source">
#include <cstdio>

extern char** environ;

int main()
{
  puts("<p>These are all environment variables that has been set before running this program:</p>");
  auto env = environ;
  puts("<ul>");
  while(*env != nullptr)
  {
    printf("<li>%s</li>\n", *env);
    ++env;
  }
  puts("</ul>");
}
</textarea>
<p id="controls"><input type="Submit" value="Build and run"> <a href="default.html" target="output">Show help page</a></p>
</form>

<iframe name="output" src="default.html" id="output_frame">
</iframe>
</div>
</body>
</html>